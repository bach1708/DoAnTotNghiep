@model List<MangaShop.Models.ChiTietDonHang>
@{
    var donHang = ViewBag.DonHang as MangaShop.Models.DonHang;
    ViewData["Title"] = "Chi tiết đơn hàng";
    Layout = "_AdminLayout";
}

<link rel="stylesheet" href="~/css/BillAdmin.css" />

<div class="container-admin-1600">
    <div class="d-flex justify-content-between align-items-center mb-4 mt-3">
        <div>
            <h2 class="page-title">🧾 CHI TIẾT ĐƠN HÀNG #@donHang.MaDonHang</h2>
            <p class="text-muted small">Thông tin khách hàng và danh sách sản phẩm đã đặt</p>
        </div>
        <a asp-action="BillAdmin" class="btn-back">
            <i class="fa-solid fa-arrow-left"></i> Quay lại
        </a>
    </div>

    <div class="table-card mb-4 p-4 shadow-sm bg-white">
        <div class="row">
            <div class="col-md-4 border-end">
                <h6 class="text-uppercase text-muted small fw-bold">Thông tin người mua</h6>
                <p class="mb-1 fw-bold customer-link">@donHang.MaKhachHangNavigation.HoTen</p>
                <p class="mb-1 small text-secondary">SĐT: @donHang.MaKhachHangNavigation.SoDienThoai</p>
                <p class="mb-0 small text-secondary">Email: @donHang.MaKhachHangNavigation.Email</p>
            </div>
            <div class="col-md-4 border-end ps-4">
                <h6 class="text-uppercase text-muted small fw-bold">Vận chuyển & Thanh toán</h6>
                <p class="mb-1 small">Ngày đặt: @donHang.NgayDat?.ToString("dd/MM/yyyy HH:mm")</p>
                <p class="mb-1 small">PTTT: <span class="fw-bold">@donHang.PhuongThucThanhToan</span></p>
                <p class="mb-0 small">Trạng thái: <span class="action-link">@donHang.TrangThai</span></p>
            </div>
            <div class="col-md-4 ps-4 text-end">
                <h6 class="text-uppercase text-muted small fw-bold">Tổng cộng đơn hàng</h6>
                <h3 class="text-price mt-2">@donHang.TongTien.ToString("N0") ₫</h3>
            </div>
        </div>
    </div>

    <div class="table-card shadow-sm">
        <table class="table custom-table-order">
            <thead>
                <tr>
                    <th class="text-start ps-4">Sản phẩm</th>
                    <th>Đơn giá</th>
                    <th>Số lượng</th>
                    <th class="text-end pe-4">Thành tiền</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td class="text-start ps-4">
                            <div class="d-flex align-items-center">
                                <img src="~/images/@item.MaTruyenNavigation.AnhBia" style="width:40px; height:55px; object-fit:cover; border-radius:4px;" class="me-3 border" />
                                <span class="customer-link fw-bold">@item.MaTruyenNavigation.TenTruyen</span>
                            </div>
                        </td>
                        <td class="text-muted">@item.DonGia.ToString("N0") ₫</td>
                        <td>@item.SoLuong</td>
                        <td class="text-end pe-4 text-price">
                            @((item.DonGia * item.SoLuong).ToString("N0")) ₫
                        </td>
                    </tr>
                }
            </tbody>
            <tfoot style="background: #fafafa; border-top: 2px solid #eee;">
                <tr>
                    <td colspan="3" class="text-end py-3 fw-bold">TỔNG TIỀN THANH TOÁN:</td>
                    <td class="text-end pe-4 py-3 text-price fs-5">
                        @donHang.TongTien.ToString("N0") ₫
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>